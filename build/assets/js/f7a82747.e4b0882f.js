"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3423],{1414:(e,n,r)=>{r.r(n),r.d(n,{contentTitle:()=>c,default:()=>g,frontMatter:()=>t,metadata:()=>i,toc:()=>l});var a=r(8168),o=(r(6540),r(5680));const t={},c=void 0,i={unversionedId:"docker/Docker\u57fa\u7840\u901f\u67e5",id:"docker/Docker\u57fa\u7840\u901f\u67e5",isDocsHomePage:!1,title:"Docker\u57fa\u7840\u901f\u67e5",description:"centOS\u5b89\u88c5docker",source:"@site/docs/docker/Docker\u57fa\u7840\u901f\u67e5.md",sourceDirName:"docker",slug:"/docker/Docker\u57fa\u7840\u901f\u67e5",permalink:"/docs/docker/Docker\u57fa\u7840\u901f\u67e5",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/docker/Docker\u57fa\u7840\u901f\u67e5.md",version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Dockerfile\u8bed\u6cd5",permalink:"/docs/docker/Dockerfile\u8bed\u6cd5"},next:{title:"Docker\u7f51\u7edc\u5316\u914d\u7f6e",permalink:"/docs/docker/Docker\u7f51\u7edc\u5316\u914d\u7f6e"}},l=[{value:"centOS\u5b89\u88c5docker",id:"centos\u5b89\u88c5docker",children:[]},{value:"docker\u5e38\u7528\u547d\u4ee4",id:"docker\u5e38\u7528\u547d\u4ee4",children:[]},{value:"Dockerfile",id:"dockerfile",children:[]}],d={toc:l},p="wrapper";function g(e){let{components:n,...r}=e;return(0,o.yg)(p,(0,a.A)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h3",{id:"centos\u5b89\u88c5docker"},"centOS\u5b89\u88c5docker"),(0,o.yg)("blockquote",null,(0,o.yg)("p",{parentName:"blockquote"},"\u53c2\u7167: ",(0,o.yg)("a",{parentName:"p",href:"https://docs.docker.com/engine/install/centos/"},"https://docs.docker.com/engine/install/centos/"))),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u79fb\u9664\u4ee5\u524d\u7684docker\u76f8\u5173\u5305"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"sudo yum remove docker \\\n                docker-client \\\n                docker-client-latest \\\n                docker-common \\\n                docker-latest \\\n                docker-latest-logrotate \\\n                docker-logrotate \\\n                docker-engine\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u914d\u7f6eyum\u6e90"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"sudo yum install -y yum-utils\nsudo yum-config-manager \\\n--add-repo \\\nhttp://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u5b89\u88c5docker"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"sudo yum install -y docker-ce docker-ce-cli containerd.io\n#\u4ee5\u4e0b\u662f\u5728\u5b89\u88c5k8s\u7684\u65f6\u5019\u4f7f\u7528\nyum install -y docker-ce-20.10.7 docker-ce-cli-20.10.7  containerd.io-1.4.6\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u542f\u52a8"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"systemctl enable docker --now\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u914d\u7f6e\u52a0\u901f"),(0,o.yg)("blockquote",{parentName:"li"},(0,o.yg)("p",{parentName:"blockquote"},"\u8fd9\u91cc\u989d\u5916\u6dfb\u52a0\u4e86docker\u7684\u751f\u4ea7\u73af\u5883\u6838\u5fc3\u914d\u7f6ecgroup")),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},'sudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://82m9ar63.mirror.aliyuncs.com"],\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2"\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n')))),(0,o.yg)("h3",{id:"docker\u5e38\u7528\u547d\u4ee4"},"docker\u5e38\u7528\u547d\u4ee4"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u67e5\u627e\u955c\u50cf"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"docker pull nginx  #\u4e0b\u8f7d\u6700\u65b0\u7248\n\n\u955c\u50cf\u540d:\u7248\u672c\u540d\uff08\u6807\u7b7e\uff09\n\ndocker pull nginx:1.20.1\n\ndocker pull redis  #\u4e0b\u8f7d\u6700\u65b0\ndocker pull redis:6.2.4\n\n## \u4e0b\u8f7d\u6765\u7684\u955c\u50cf\u90fd\u5728\u672c\u5730\ndocker images  #\u67e5\u770b\u6240\u6709\u955c\u50cf\n\nredis = redis:latest\n\ndocker rmi \u955c\u50cf\u540d:\u7248\u672c\u53f7/\u955c\u50cfid\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u542f\u52a8\u5bb9\u5668"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n\n#\u3010docker run  \u8bbe\u7f6e\u9879   \u955c\u50cf\u540d  \u3011 \u955c\u50cf\u542f\u52a8\u8fd0\u884c\u7684\u547d\u4ee4\uff08\u955c\u50cf\u91cc\u9762\u9ed8\u8ba4\u6709\u7684\uff0c\u4e00\u822c\u4e0d\u4f1a\u5199\uff09\n\n# -d\uff1a\u540e\u53f0\u8fd0\u884c\n# --restart=always: \u5f00\u673a\u81ea\u542f\ndocker run --name=mynginx   -d  --restart=always -p  88:80   nginx\n\n# \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps\n# \u67e5\u770b\u6240\u6709\ndocker ps -a\n# \u5220\u9664\u505c\u6b62\u7684\u5bb9\u5668\ndocker rm  \u5bb9\u5668id/\u540d\u5b57\ndocker rm -f mynginx   #\u5f3a\u5236\u5220\u9664\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\n\n#\u505c\u6b62\u5bb9\u5668\ndocker stop \u5bb9\u5668id/\u540d\u5b57\n#\u518d\u6b21\u542f\u52a8\ndocker start \u5bb9\u5668id/\u540d\u5b57\n\n#\u5e94\u7528\u5f00\u673a\u81ea\u542f\ndocker update \u5bb9\u5668id/\u540d\u5b57 --restart=always\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u4fee\u6539\u5185\u5bb9"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},'# \u8fdb\u5165\u5bb9\u5668\u5185\u90e8\u7684\u7cfb\u7edf\uff0c\u4fee\u6539\u5bb9\u5668\u5185\u5bb9\ndocker exec -it \u5bb9\u5668id  /bin/bash\n\n# \u4fee\u6539\u9875\u9762\u53ea\u9700\u8981\u53bb \u4e3b\u673a\u7684 /data/html\ndocker run --name=mynginx   \\\n-d  --restart=always \\\n-p  88:80 -v /data/html:/usr/share/nginx/html:ro  \\\nnginx\n\n# \u63d0\u4ea4\u6539\u53d8\n# docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]\ndocker commit -a "leifengyang"  -m "\u9996\u9875\u53d8\u5316" 341d81f7504f guignginx:v1.0\n\n# \u955c\u50cf\u4f20\u8f93\n# \u5c06\u955c\u50cf\u4fdd\u5b58\u6210\u538b\u7f29\u5305\ndocker save -o abc.tar guignginx:v1.0\n# \u522b\u7684\u673a\u5668\u52a0\u8f7d\u8fd9\u4e2a\u955c\u50cf\ndocker load -i abc.tar\n# \u79bb\u7ebf\u5b89\u88c5    \n'))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"docker tag local-image:tagname new-repo:tagname\ndocker push new-repo:tagname\n\n# \u628a\u65e7\u955c\u50cf\u7684\u540d\u5b57\uff0c\u6539\u6210\u4ed3\u5e93\u8981\u6c42\u7684\u65b0\u7248\u540d\u5b57\ndocker tag guignginx:v1.0 leifengyang/guignginx:v1.0\n\n# \u767b\u5f55\u5230docker hub\ndocker login       \n\ndocker logout\uff08\u63a8\u9001\u5b8c\u6210\u955c\u50cf\u540e\u9000\u51fa\uff09\n\n# \u63a8\u9001\ndocker push leifengyang/guignginx:v1.0\n\n# \u522b\u7684\u673a\u5668\u4e0b\u8f7d\ndocker pull leifengyang/guignginx:v1.0\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"\u5176\u5b83"),(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"docker logs \u5bb9\u5668\u540d/id   \u6392\u9519\n\ndocker exec -it \u5bb9\u5668id /bin/bash\n\n# docker \u7ecf\u5e38\u4fee\u6539nginx\u914d\u7f6e\u6587\u4ef6\ndocker run -d -p 80:80 \\\n-v /data/html:/usr/share/nginx/html:ro \\\n-v /data/conf/nginx.conf:/etc/nginx/nginx.conf \\\n--name mynginx-02 \\\nnginx\n\n#\u628a\u5bb9\u5668\u6307\u5b9a\u4f4d\u7f6e\u7684\u4e1c\u897f\u590d\u5236\u51fa\u6765 \ndocker cp 5eff66eec7e1:/etc/nginx/nginx.conf  /data/conf/nginx.conf\n#\u628a\u5916\u9762\u7684\u5185\u5bb9\u590d\u5236\u5230\u5bb9\u5668\u91cc\u9762\ndocker cp  /data/conf/nginx.conf  5eff66eec7e1:/etc/nginx/nginx.conf\n")))),(0,o.yg)("h3",{id:"dockerfile"},"Dockerfile"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-Dockerfile"},'FROM openjdk:8-jdk-slim\nLABEL maintainer=leifengyang\n\nCOPY target/*.jar   /app.jar\n\nENTRYPOINT ["java","-jar","/app.jar"]\n')),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"## \u6253\u5305\ndocker build -t java-demo:v1.0 .\n## \u542f\u52a8\u5bb9\u5668\ndocker run -d -p 8080:8080 --name myjava-app java-demo:v1.0 \n## \u5206\u4eab\u955c\u50cf\n# \u767b\u5f55docker hub\ndocker login\n\n#\u7ed9\u65e7\u955c\u50cf\u8d77\u540d\ndocker tag java-demo:v1.0  leifengyang/java-demo:v1.0\n\n# \u63a8\u9001\u5230docker hub\ndocker push leifengyang/java-demo:v1.0\n\n# \u522b\u7684\u673a\u5668\ndocker pull leifengyang/java-demo:v1.0\n\n# \u522b\u7684\u673a\u5668\u8fd0\u884c\ndocker run -d -p 8080:8080 --name myjava-app java-demo:v1.0 \n\n## \u90e8\u7f72\u4e2d\u95f4\u4ef6\n# docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n#redis\u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\ndocker run -v /data/redis/redis.conf:/etc/redis/redis.conf \\\n-v /data/redis/data:/data \\\n-d --name myredis \\\n-p 6379:6379 \\\nredis:latest  redis-server /etc/redis/redis.conf\n")))}g.isMDXComponent=!0},5680:(e,n,r)=>{r.d(n,{xA:()=>p,yg:()=>u});var a=r(6540);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function t(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,a)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,a,o=function(e,n){if(null==e)return{};var r,a,o={},t=Object.keys(e);for(a=0;a<t.length;a++)r=t[a],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(a=0;a<t.length;a++)r=t[a],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=a.createContext({}),d=function(e){var n=a.useContext(l),r=n;return e&&(r="function"==typeof e?e(n):c(c({},n),e)),r},p=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},g="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var r=e.components,o=e.mdxType,t=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),g=d(r),m=o,u=g["".concat(l,".").concat(m)]||g[m]||s[m]||t;return r?a.createElement(u,c(c({ref:n},p),{},{components:r})):a.createElement(u,c({ref:n},p))}));function u(e,n){var r=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var t=r.length,c=new Array(t);c[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[g]="string"==typeof e?e:o,c[1]=i;for(var d=2;d<t;d++)c[d]=r[d];return a.createElement.apply(null,c)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"}}]);