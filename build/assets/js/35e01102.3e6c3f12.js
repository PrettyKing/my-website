"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6496],{4513:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var r=t(8168),i=(t(6540),t(5680));const l={title:"vue\u7684$nextTick\u539f\u7406",date:new Date("2021-07-23T00:00:00.000Z"),tags:["question"],categories:["\u95ee\u9898\u79ef\u7d2f"]},a=void 0,o={unversionedId:"question/vue\u7684nextTick\u539f\u7406",id:"question/vue\u7684nextTick\u539f\u7406",isDocsHomePage:!1,title:"vue\u7684$nextTick\u539f\u7406",description:"js\u7684\u8fd0\u884c\u673a\u5236",source:"@site/docs\\question\\vue\u7684nextTick\u539f\u7406.md",sourceDirName:"question",slug:"/question/vue\u7684nextTick\u539f\u7406",permalink:"/docs/question/vue\u7684nextTick\u539f\u7406",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/question\\vue\u7684nextTick\u539f\u7406.md",version:"current",frontMatter:{title:"vue\u7684$nextTick\u539f\u7406",date:"2021-07-23T00:00:00.000Z",tags:["question"],categories:["\u95ee\u9898\u79ef\u7d2f"]},sidebar:"defaultSidebar",previous:{title:"vue keep-alive\u7684\u5b9e\u73b0",permalink:"/docs/question/vue\u7684keep-alive"},next:{title:"vue \u9488\u5bf9\u641c\u7d22\u5f15\u64ce\u7684seo\u4f18\u5316",permalink:"/docs/question/vue\u7684seo"}},c=[{value:"js\u7684\u8fd0\u884c\u673a\u5236",id:"js\u7684\u8fd0\u884c\u673a\u5236",children:[]},{value:"\u4ec0\u4e48\u662f$nextTick",id:"\u4ec0\u4e48\u662fnexttick",children:[{value:"1.MutationObserver",id:"1mutationobserver",children:[]},{value:"2.\u6e90\u7801\u6d45\u6790",id:"2\u6e90\u7801\u6d45\u6790",children:[]}]},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f",children:[]},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",children:[]},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",children:[]}],u={toc:c},s="wrapper";function p(e){let{components:n,...t}=e;return(0,i.yg)(s,(0,r.A)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("h2",{id:"js\u7684\u8fd0\u884c\u673a\u5236"},"js\u7684\u8fd0\u884c\u673a\u5236"),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"JS\u8fd0\u884c\u673a\u5236(Event Loop)")),(0,i.yg)("p",null,"JS\u6267\u884c\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u5b83\u662f\u57fa\u4e8e\u4e8b\u4ef6\u5faa\u73af\u7684\u3002"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u6240\u6709\u540c\u6b65\u4efb\u52a1\u90fd\u5728\u4e3b\u7ebf\u7a0b\u4e0a\u6267\u884c\uff0c\u5f62\u6210\u4e2a\u6267\u884c\u6808\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u4e3b\u7ebf\u7a0b\u4e4b\u5916\uff0c\u4f1a\u5b58\u5728\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\uff0c \u53ea\u8981\u5f02\u6b65\u4efb\u52a1\u6709\u4e86\u7ed3\u679c\uff0c\u5c31\u5728\u4efb\u52a1\u961f\u5217\u4e2d\u653e\u7f6e\u4e2a\u4e8b\u4ef6 \u3002"),(0,i.yg)("li",{parentName:"ul"},"\u5f53\u6267\u884c\u6808\u4e2d\u7684\u6240\u6709\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\u540e\uff0c\u5c31\u4f1a\u8bfb\u53d6\u4efb\u52a1\u961f\u5217\u3002\u90a3\u4e9b\u5bf9\u5e94\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u4f1a\u7ed3\u675f\u7b49\u5f85\u72b6\u6001\uff0c\u8fdb\u5165\u6267\u884c\u6808\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u4e3b\u7ebf\u7a0b\u4e0d\u65ad\u91cd\u590d\u7b2c\u4e09\u6b65\u3002")),(0,i.yg)("p",null,"\u8fd9\u91cc\u4e3b\u7ebf\u7a0b\u7684\u6267\u884c\u8fc7\u7a0b\u5c31\u662f\u4e00\u4e2atick, \u800c\u6240\u6709\u7684\u5f02\u6b65\u7ed3\u679c\u90fd\u662f\u901a\u8fc7\u4efb\u52a1\u961f\u5217\u6765\u8c03\u5ea6\u3002Event Loop \u5206\u4e3a\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\uff0c\u65e0\u8bba\u662f\u6267\u884c\u5b8f\u4efb\u52a1\u8fd8\u662f\u5fae\u4efb\u52a1\uff0c\u5b8c\u6210\u540e\u90fd\u4f1a\u8fdb\u5165\u5230\u4e00\u4e0btick,\u5e76\u5728\u4e24\u4e2atick \u4e4b\u95f4\u8fdb\u884cUI\u6e32\u67d3\u3002"),(0,i.yg)("p",null,"\u7531\u4e8eVue DOM\u66f4\u65b0\u662f\u5f02\u6b65\u6267\u884c\u7684\uff0c\u5373\u4fee\u6539\u6570\u636e\u65f6\uff0c\u89c6\u56fe\u4e0d\u4f1a\u7acb\u5373\u66f4\u65b0\uff0c\u800c\u662f\u4f1a\u76d1\u542c\u6570\u636e\u53d8\u5316\uff0c\u5e76\u7f13\u5b58\u5728\u540c\u4e00\u4e8b\u4ef6\u5faa\u73af\u4e2d\uff0c\u7b49\u540c\u4e00\u6570\u636e\u5faa\u73af\u4e2d\u7684\u6240\u6709\u6570\u636e\u53d8\u5316\u5b8c\u6210\u4e4b\u540e\uff0c\u518d\u7edf\u4e00\u8fdb\u884c\u89c6\u56fe\u66f4\u65b0\u3002 \u4e3a\u4e86\u786e\u4fdd\u5f97\u5230\u66f4\u65b0\u540e\u7684 DOM\uff0c\u6240\u4ee5\u8bbe\u7f6e\u4e86Vue .nextTick()\u65b9\u6cd5\u3002"),(0,i.yg)("h2",{id:"\u4ec0\u4e48\u662fnexttick"},"\u4ec0\u4e48\u662f$nextTick"),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"Vue \u7684\u6838\u5fc3\u65b9\u6cd5\u4e4b\u4e00\uff0c \u5b98\u65b9\u6587\u6863\u89e3\u91ca\u5982\u4e0b: \u5728\u4e0b\u6b21DOM \u66f4\u65b0\u5faa\u73af\u7ed3\u675f\u4e4b \u540e\u6267\u884c\u5ef6\u8fdf\u56de\u8c03\u3002\u5728\u4fee\u6539\u6570\u636e\u4e4b\u540e\u7acb\u5373\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u83b7\u53d6\u66f4\u65b0\u540e\u7684DOM\u3002")),(0,i.yg)("h3",{id:"1mutationobserver"},"1.MutationObserver"),(0,i.yg)("p",null,"\u5148\u7b80\u5355\u4ecb\u7ecd\u4e0bMutationObserver: MO\u662fHTMLS\u4e2d\u7684API, \u662f\u4e00\u4e2a\u7528\u4e8e\u76d1\u89c6DOM\u53d8\u52a8\u7684\u63a5\u53e3\uff0c\u5b83\u53ef\u4ee5\u76d1\u542c\u4e00\u4e2aDOM\u5bf9\u8c61\u4e0a\u53d1\u751f\u7684\u5b50\u8282\u70b9\u5220\u9664\u3001\u5c5e\u6027\u4fee\u6539\u3001\u6587\u672c\u5185\u5bb9\u4fee\u6539\u7b49\u3002\u8c03\u7528\u8fc7\u7a0b\u662f \u8981\u5148\u7ed9\u5b83\u7ed1\u5b9a\u56de\u8c03\uff0c\u5f97\u5230MO\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u56de\u8c03\u4f1a\u5728MO\u5b9e\u4f8b\u76d1\u542c\u5230\u53d8\u52a8\u65f6\u89e6\u53d1\u3002\u8fd9\u91ccMO\u7684\u56de\u8c03\u662f\u653e\u5728microtask\u4e2d\u6267\u884c\u7684\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},'// \u521b\u5efaMO\u5b9e\u4f8b\nconst observer = new MutationObserver(callback)\nconst textNode = "\u60f3\u8981\u76d1\u542c\u7684Don\u8282\u70b9"\nobserver.observe(textNode, {\n  characterData: true, // \u8bf4\u660e\u76d1\u542c\u6587\u672c\u5185\u5bb9\u7684\u4fee\u6539\n})\n')),(0,i.yg)("h3",{id:"2\u6e90\u7801\u6d45\u6790"},"2.\u6e90\u7801\u6d45\u6790"),(0,i.yg)("p",null,"nextTick\u7684\u5b9e\u73b0\u5355\u72ec\u6709\u4e00\u4e2aJS\u6587\u4ef6\u6765\u7ef4\u62a4\u5b83\uff0c\u5728src/core/util/next-tick.js \u4e2d\u3002nextTick \u6e90\u7801\u4e3b\u8981\u5206\u4e3a\u4e24\u5757:\u80fd\u529b\u68c0\u6d4b\u548c\u6839\u636e\u80fd\u529b\u68c0\u6d4b\u4ee5\u4e0d\u540c\u65b9\u5f0f\u6267\u884c\u56de\u8c03\u961f\u5217\u3002"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"\u80fd\u529b\u68c0\u6d4b")),(0,i.yg)("p",null,"\u7531\u4e8e\u5b8f\u4efb\u52a1\u8017\u8d39\u7684\u65f6\u95f4\u662f\u5927\u4e8e\u5fae\u4efb\u52a1\u7684\uff0c\u6240\u4ee5\u5728\u6d4f\u89c8\u5668\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u4f18\u5148\u4f7f\u7528\u5fae\u4efb\u52a1\u3002\u5982\u679c\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5fae\u4efb\u52a1\uff0c\u518d\u4f7f\u7528\u5b8f\u4efb\u52a1\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},'// \u7a7a\u51fd\u6570\uff0c\u53ef\u7528\u4f5c\u51fd\u6570\u5360\u4f4d\u7b26\nimport { noop } from "shared/util"\n\n// \u9519\u8bef\u5904\u7406\u51fd\u6570\nimport { handleError } from "./error"\n\n// \u662f\u5426\u662fIE\u3001IOS\u3001\u5185\u7f6e\u51fd\u6570\nimport { isIE, isIOS, isNative } from "./env"\n\n// \u4f7f\u7528 MicroTask \u7684\u6807\u8bc6\u7b26\uff0c\u8fd9\u91cc\u662f\u56e0\u4e3a\u706b\u72d0\u5728<=53\u65f6 \u65e0\u6cd5\u89e6\u53d1\u5fae\u4efb\u52a1\uff0c\u5728modules/events.js\u6587\u4ef6\u4e2d\u5f15\u7528\u8fdb\u884c\u5b89\u5168\u6392\u9664\nexport let isUsingMicroTask = false\n\n// \u7528\u6765\u5b58\u50a8\u6240\u6709\u9700\u8981\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\nconst callbacks = []\n\n// \u7528\u6765\u6807\u5fd7\u662f\u5426\u6b63\u5728\u6267\u884c\u56de\u8c03\u51fd\u6570\nlet pending = false\n\n// \u5bf9callbacks\u8fdb\u884c\u904d\u5386\uff0c\u7136\u540e\u6267\u884c\u76f8\u5e94\u7684\u56de\u8c03\u51fd\u6570\nfunction flushCallbacks() {\n  pending = false\n  // \u8fd9\u91cc\u62f7\u8d1d\u7684\u539f\u56e0\u662f\uff1a\n  // \u6709\u7684cb \u6267\u884c\u8fc7\u7a0b\u4e2d\u53c8\u4f1a\u5f80callbacks\u4e2d\u52a0\u5165\u5185\u5bb9\n  // \u6bd4\u5982 $nextTick\u7684\u56de\u8c03\u51fd\u6570\u91cc\u8fd8\u6709$nextTick\n  // \u540e\u8005\u7684\u5e94\u8be5\u653e\u5230\u4e0b\u4e00\u8f6e\u7684nextTick \u4e2d\u6267\u884c\n  // \u6240\u4ee5\u62f7\u8d1d\u4e00\u4efd\u5f53\u524d\u7684\uff0c\u904d\u5386\u6267\u884c\u5b8c\u5f53\u524d\u7684\u5373\u53ef\uff0c\u907f\u514d\u65e0\u4f11\u6b62\u7684\u6267\u884c\u4e0b\u53bb\n  const copies = callbcks.slice(0)\n  callbacks.length = 0\n  for (let i = 0; i < copies.length; i++) {\n    copies[i]()\n  }\n}\n\nlet timerFunc // \u5f02\u6b65\u6267\u884c\u51fd\u6570 \u7528\u4e8e\u5f02\u6b65\u5ef6\u8fdf\u8c03\u7528 flushCallbacks \u51fd\u6570\n\n// \u57282.5\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528(\u5b8f)\u4efb\u52a1(\u4e0e\u5fae\u4efb\u52a1\u7ed3\u5408\u4f7f\u7528)\u3002\n// \u7136\u800c\uff0c\u5f53\u72b6\u6001\u5728\u91cd\u65b0\u7ed8\u5236\u4e4b\u524d\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e9b\u5fae\u5999\u7684\u95ee\u9898\n// (\u4f8b\u5982#6813,out-in\u8f6c\u6362)\u3002\n// \u540c\u6837\uff0c\u5728\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u4e2d\u4f7f\u7528(\u5b8f)\u4efb\u52a1\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u5947\u602a\u7684\u884c\u4e3a\n// \u56e0\u6b64\uff0c\u6211\u4eec\u73b0\u5728\u518d\u6b21\u5728\u4efb\u4f55\u5730\u65b9\u4f7f\u7528\u5fae\u4efb\u52a1\u3002\n// \u4f18\u5148\u4f7f\u7528 Promise\nif (typeof Promise !== "undefined" && isNative(Promise)) {\n  const p = Promise.resolve()\n  timerFunc = () => {\n    p.then(flushCallbacks)\n\n    // IOS \u7684UIWebView, Promise.then \u56de\u8c03\u88ab\u63a8\u5165 microTask \u961f\u5217\uff0c\u4f46\u662f\u961f\u5217\u53ef\u80fd\u4e0d\u4f1a\u5982\u671f\u6267\u884c\n    // \u56e0\u6b64\uff0c\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u8ba1\u65f6\u5668\u5f3a\u5236\u6267\u884c microTask\n    if (isIOS) setTimeout(noop)\n  }\n  isUsingMicroTask = true\n} else if (\n  !isIE &&\n  typeof MutationObserver !== "undefined" &&\n  (isNative(MutationObserver) ||\n    MutationObserver.toString === "[object MutationObserverConstructor]")\n) {\n  // \u5f53 \u539f\u751fPromise \u4e0d\u53ef\u7528\u65f6\uff0c\u4f7f\u7528 \u539f\u751fMutationObserver\n  // e.g. PhantomJS, iOS7, Android 4.4\n\n  let counter = 1\n  // \u521b\u5efaMO\u5b9e\u4f8b\uff0c\u76d1\u542c\u5230DOM\u53d8\u52a8\u540e\u4f1a\u6267\u884c\u56de\u8c03flushCallbacks\n  const observer = new MutationObserver(flushCallbacks)\n  const textNode = document.createTextNode(String(counter))\n  observer.observe(textNode, {\n    characterData: true, // \u8bbe\u7f6etrue \u8868\u793a\u89c2\u5bdf\u76ee\u6807\u7684\u6539\u53d8\n  })\n\n  // \u6bcf\u6b21\u6267\u884ctimerFunc \u90fd\u4f1a\u8ba9\u6587\u672c\u8282\u70b9\u7684\u5185\u5bb9\u5728 0/1\u4e4b\u95f4\u5207\u6362\n  // \u5207\u6362\u4e4b\u540e\u5c06\u65b0\u503c\u590d\u5236\u5230 MO \u89c2\u6d4b\u7684\u6587\u672c\u8282\u70b9\u4e0a\n  // \u8282\u70b9\u5185\u5bb9\u53d8\u5316\u4f1a\u89e6\u53d1\u56de\u8c03\n  timerFunc = () => {\n    counter = (counter + 1) % 2\n    textNode.data = String(counter) // \u89e6\u53d1\u56de\u8c03\n  }\n  isUsingMicroTask = true\n} else if (typeof setImmediate !== "undefined" && isNative(setImmediate)) {\n  timerFunc = () => {\n    setImmediate(flushCallbacks)\n  }\n} else {\n  timerFunc = () => {\n    setTimeout(flushCallbacks, 0)\n  }\n}\n')),(0,i.yg)("p",null,"\u5ef6\u8fdf\u8c03\u7528\u4f18\u5148\u7ea7\u5982\u4e0b: Promise > MutationObserver > setlmmediate > setTimeout"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"export function nextTick(cb? Function, ctx: Object) {\n    let _resolve\n    // cb \u56de\u8c03\u51fd\u6570\u4f1a\u7edf\u4e00\u5904\u7406\u538b\u5165callbacks\u6570\u7ec4\n    callbacks.push(() => {\n        if(cb) {\n            try {\n                cb.call(ctx)\n            } catch(e) {\n                handleError(e, ctx, 'nextTick')\n            }\n        } else if (_resolve) {\n            _resolve(ctx)\n        }\n    })\n\n    // pending \u4e3afalse \u8bf4\u660e\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u4e2d\u6ca1\u6709\u6267\u884c\u8fc7timerFunc()\n    if(!pending) {\n        pending = true\n        timerFunc()\n    }\n\n    // \u5f53\u4e0d\u4f20\u5165 cb \u53c2\u6570\u65f6\uff0c\u63d0\u4f9b\u4e00\u4e2apromise\u5316\u7684\u8c03\u7528\n    // \u5982nextTick().then(() => {})\n    // \u5f53_resolve\u6267\u884c\u65f6\uff0c\u5c31\u4f1a\u8df3\u8f6c\u5230then\u903b\u8f91\u4e2d\n    if(!cb && typeof Promise !== 'undefined') {\n        return new Promise(resolve => {\n            _resolve = resolve\n        })\n    }\n}\n")),(0,i.yg)("p",null,"next-tick.js\u5bf9\u5916\u66b4\u9732\u4e86nextTick \u8fd9\u4e00\u4e2a\u53c2\u6570\uff0c \u6240\u4ee5\u6bcf\u6b21\u8c03\u7528Vue .nextTick\u65f6\u4f1a\u6267\u884c"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u628a\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570cb\u538b\u5165callbacks \u6570\u7ec4"),(0,i.yg)("li",{parentName:"ul"},"\u6267\u884ctimerFunc\u51fd\u6570\uff0c\u5ef6\u8fdf\u8c03\u7528flushCallbacks \u51fd\u6570"),(0,i.yg)("li",{parentName:"ul"},"\u904d\u5386\u6267\u884ccallbacks \u6570\u7ec4\u4e2d\u7684\u6240\u6709\u51fd\u6570")),(0,i.yg)("p",null,"\u8fd9\u91cc\u7684callbacks \u6ca1\u6709\u76f4\u63a5\u5728nextTick \u4e2d\u6267\u884c\u56de\u8c03\u51fd\u6570\u7684\u539f\u56e0\u662f\u4fdd\u8bc1\u5728\u540c\u4e00\u4e2atick \u5185\u591a\u6b21\u6267\u884cnextTick, \u4e0d\u4f1a\u5f00\u542f\u591a\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u800c\u662f\u628a\u8fd9\u4e9b\u5f02\u6b65\u4efb\u52a1\u90fd\u538b\u6210\u4e00\u4e00\u4e2a\u540c\u6b65\u4efb\u52a1\uff0c\u5728\u4e0b\u4e00\u4e2atick \u6267\u884c\u5b8c\u6bd5\u3002"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"\u9644\u52a0")),(0,i.yg)("p",null,"noop \u7684\u5b9a\u4e49\u5982\u4e0b"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nexport function noop(a?: any, b?: any, c?: any) {}\n")),(0,i.yg)("h2",{id:"\u4f7f\u7528\u65b9\u5f0f"},"\u4f7f\u7528\u65b9\u5f0f"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u8bed\u6cd5\uff1a[Vue.nextTick( ","[callback, context","]"," )]"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"\u53c2\u6570"),"\uff1a",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"{Function} [callback]"),"\uff1a\u56de\u8c03\u51fd\u6570\uff0c\u4e0d\u4f20\u65f6\u63d0\u4f9b promise \u8c03\u7528"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"{Object} [context]"),"\uff1a\u56de\u8c03\u51fd\u6570\u6267\u884c\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u4e0d\u4f20\u9ed8\u8ba4\u662f\u81ea\u52a8\u7ed1\u5b9a\u5230\u8c03\u7528\u5b83\u7684\u5b9e\u4f8b\u4e0a\u3002")))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"//\u6539\u53d8\u6570\u636e\nvm.message = \"changed\"\n\n//\u60f3\u8981\u7acb\u5373\u4f7f\u7528\u66f4\u65b0\u540e\u7684DOM\u3002\u8fd9\u6837\u4e0d\u884c\uff0c\u56e0\u4e3a\u8bbe\u7f6emessage\u540eDOM\u8fd8\u6ca1\u6709\u66f4\u65b0\nconsole.log(vm.$el.textContent) // \u5e76\u4e0d\u4f1a\u5f97\u5230'changed'\n\n//\u8fd9\u6837\u53ef\u4ee5\uff0cnextTick\u91cc\u9762\u7684\u4ee3\u7801\u4f1a\u5728DOM\u66f4\u65b0\u540e\u6267\u884c\nVue.nextTick(function () {\n  // DOM \u66f4\u65b0\u4e86\n  //\u53ef\u4ee5\u5f97\u5230'changed'\n  console.log(vm.$el.textContent)\n})\n\n// \u4f5c\u4e3a\u4e00\u4e2a Promise \u4f7f\u7528 \u5373\u4e0d\u4f20\u56de\u8c03\nVue.nextTick().then(function () {\n  // DOM \u66f4\u65b0\u4e86\n})\n")),(0,i.yg)("p",null,"Vue\u5b9e\u4f8b\u65b9\u6cd5vm.$nextTick \u505a\u4e86\u8fdb\u4e00 \u6b65\u5c01\u88c5\uff0c\u628acontext \u53c2\u6570\u8bbe\u7f6e\u6210\u5f53\u524dVue\u5b9e\u4f8b\u3002"),(0,i.yg)("p",null,"\u4f7f\u7528Vue .nextTick()\u662f\u4e3a\u4e86\u53ef\u4ee5\u83b7\u53d6\u66f4\u65b0\u540e\u7684DOM\u3002\u89e6\u53d1\u65f6\u673a: \u5728\u540c\u4e00\u4e8b\u4ef6 \u5faa\u73af\u4e2d\u7684\u6570\u636e\u53d8\u5316\u540e\uff0c DOM\u5b8c\u6210\u66f4\u65b0\uff0c \u7acb\u5373\u6267\u884cVue .nextTick()\u7684\u56de\u8c03 \u3002"),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"\u540c\u4e00\u4e8b\u4ef6\u5faa\u73af\u4e2d\u7684\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5-> DOM\u66f4\u65b0-> nextTick callback \u89e6\u53d1\u3002")),(0,i.yg)("h2",{id:"\u4f7f\u7528\u573a\u666f"},"\u4f7f\u7528\u573a\u666f"),(0,i.yg)("p",null,"\u5728Vue\u751f\u547d\u5468\u671f\u7684created()\u920e\u5b50\u51fd\u6570\u8ff8\u884c\u7684DOM\u64cd\u4f5c-\u5b9a\u8981\u653e\u5728Vue .nextTick( )\u7684\u56de\u51cb\u51fd\u6570\u4e2d\u3002\u539f\u56e0:\u662fcreated()\u920e\u5b50\u51fd\u6570\u6297\u884c\u8098DOM\u5176\u7a81\u5e76\u672a\u8ff8\u884c\u6e32\u67d3\u3002"),(0,i.yg)("p",null,"\u5728\u6570\u636e\u5909\u5316\u540e\u8981\u6297\u884c\u7684\u67d0\u4e2a\u64cd\u4f5c\uff0c\u800c\u8fbc\u4e2a\u64cd\u4f5c\u9700\u8981\u4f7f\u7528\u968f\u6570\u636e\u6539\u5909\u800c\u6539\u5909\u7684DOM\u7d50\u67b8\u7684\u540b\u5019\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5e94\u8be5\u653e\u5728Vue .nextTick()\u7684\u56de\u8abf\u51fd\u6570\u4e2d\u3002\u539f\u56e0: Vue\u5f02\u6b65\u6267\u884cDOM\u66f4\u65b0\uff0c\u53ea\u8981\u53cc\u5bdf\u5230\u6570\u636e\u5909\u5316\uff0cVue\u5c07\u5f00\u542f\u4e00\u4e2a\u961f\u5217\uff0c\u5e76\u7de9\u51b2\u5728\u540c\u4e00\u4e8b\u4ef6\u5faa\u574f\u4e2d\u53cb\u751f\u7684\u6240\u6709\u6570\u636e\u6539\u5909\uff0c\u5982\u679c\u540c\u4e00\u4e2awatcher \u88ab\u591a\u6b21\u89e6\u5c8c\uff0c\u53ea\u4f1a\u88ab\u63a8\u5165\u5230\u81e5\u5217\u4e2d\u4e00\u6b21\u3002"),(0,i.yg)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Vue\u7684nextTick \u5176\u672c\u8d28\u662f\u5bf9JavaScript \u6267\u884c\u539f\u7406EventLoop\u7684\u4e00\u79cd\u5e94\u7528"),(0,i.yg)("li",{parentName:"ul"},"nextTick\u7684\u6838\u5fc3\u5229\u7528\u4e86\u5982Promise\u3001MutationObserver \u3001setlmmediate\u3001setTimeout\u7684\u539f\u751fJavaScript\u65b9\u6cd5\u6765\u6a21\u62df\u5bf9\u5e94\u7684\u5fae/\u5b8f\u4efb\u52a1\u7684\u5b9e\u73b0\uff0c\u672c\u8d28\u662f\u4e3a\u4e86\u5229\u7528JavaScript \u7684\u8fd9\u4e9b\u5f02\u6b65\u56de\u8c03\u4efb\u52a1\u961f\u5217\u6765\u5b9e\u73b0Vue\u6846\u67b6\u4e2d\u81ea\u5df1\u7684\u5f02\u6b65\u56de\u8c03\u961f\u5217"),(0,i.yg)("li",{parentName:"ul"},"nextTick\u4e0d\u4ec5\u662fVue \u5185\u90e8\u7684\u5f02\u6b65\u961f\u5217\u7684\u8c03\u7528\u65b9\u6cd5\uff0c\u540c\u65f6\u4e5f\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u6ee1\u8db3\u5b9e\u9645\u5e94\u7528\u4e2d\u5bf9Dom\u66f4\u65b0\u6570\u636e\u65f6\u673a\u7684\u540e\u7eed\u903b\u8f91\u5904\u7406"),(0,i.yg)("li",{parentName:"ul"},"nextTick\u662f\u5178\u578b\u7684\u5c06\u5e95\u5c42JavaScript \u6267\u884c\u539f\u7406\u5e94\u7528\u5230\u5177\u4f53\u6848\u4f8b\u4e2d\u7684\u793a\u4f8b\n\u5f15\u5165\u5f02\u6b65\u66f4\u65b0\u961f\u5217\u673a\u5236\u7684\u539f\u56e0:",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"\u5982\u679c\u662f\u540c\u6b65\u66f4\u65b0\uff0c\u5219\u591a\u6b21\u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\u8d4b\u503c\uff0c\u4f1a\u9891\u7e41\u89e6\u53d1U/Dom\u7684\u6e32\u67d3\uff0c\u53ef\u4ee5\u51cf\u5c11-\u4e9b\u65e0\u7528\u6e32\u67d3"),(0,i.yg)("li",{parentName:"ul"},"\u540c\u65f6\u7531\u4e8eVirtualDOM \u7684\u5f15\u5165\uff0c\u6bcf\u6b21\u72b6\u6001 \u53d1\u751f\u53d8\u5316\u540e\uff0c\u72b6\u6001\u53d8\u5316\u7684\u4fe1\u53f7\u4f1a\u53d1\u9001\u7ed9\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u5185\u90e8\u4f7f\u7528VirtualDOM \u8fdb\u884c\u8ba1\u7b97\u5f97\u51fa\u9700\u8981\u66f4\u65b0\u7684\u5177\u4f53\u7684DOM\u8282\u70b9\uff0c\u7136\u540e\u5bf9DOM\u8fdb\u884c\u66f4\u65b0\u64cd\u4f5c\uff0c\u6bcf\u6b21\u66f4\u65b0\u72b6\u6001\u540e\u7684\u6e32\u67d3\u8fc7\u7a0b\u9700\u8981\u66f4\u591a\u7684\u8ba1\u7b97\uff0c\u800c\u8fd9\u79cd\u65e0\u7528\u529f\u4e5f\u5c06\u6d6a\u8d39\u66f4\u591a\u7684\u6027\u80fd\uff0c\u6240\u4ee5\u5f02\u6b65\u6e32\u67d3\u53d8\u5f97\u66f4\u52a0\u81f3\u5173\u91cd\u8981")))))}p.isMDXComponent=!0},5680:(e,n,t)=>{t.d(n,{xA:()=>s,yg:()=>y});var r=t(6540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=r.createContext({}),u=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},s=function(e){var n=u(e.components);return r.createElement(c.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,l=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),p=u(t),g=i,y=p["".concat(c,".").concat(g)]||p[g]||m[g]||l;return t?r.createElement(y,a(a({ref:n},s),{},{components:t})):r.createElement(y,a({ref:n},s))}));function y(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var l=t.length,a=new Array(l);a[0]=g;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o[p]="string"==typeof e?e:i,a[1]=o;for(var u=2;u<l;u++)a[u]=t[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"}}]);